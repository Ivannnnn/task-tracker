(this["webpackJsonptask-tracker"]=this["webpackJsonptask-tracker"]||[]).push([[0],{15:function(e,t,n){e.exports=n(22)},20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function u(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var o=n(12),i=n.n(o),s=(n(20),n(3)),l=n(2),f=n.n(l),d=n(4),p=n(1),m=n(7);function v(e){var t=e.onChange,n=e.type,r=void 0===n?"text":n,c=Object(m.a)(e,["onChange","type"]);return a.a.createElement("input",Object.assign({type:r},c,{onChange:function(e){return t(e.target.value)}}))}var j=n(13),b=n(10),k=n(6),h=function(e,t){return e.toString().length>t?e:("0"+e).slice(-1*t)},y=function(e){return new Date(new Date(e).setHours(0,0,0,0))},w=function(e){var t=new Date(y(new Date).getTime()+1e3*e).toString().substr(19,2);return[h(Math.floor(e/60/60),2),t].join(":")};function O(e,t){var n={};return e.forEach((function(e){n[e[t]]=e})),n}var E=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return null===e||void 0===e?null:"string"===typeof e?e:Object.keys(e).filter((function(t){return e[t]})).join(" ")})).filter(Boolean).join(" ")},g={asc:function(e,t){return e-t>0?1:-1},desc:function(e,t){return e-t<0?1:-1}};function x(e,t,n){e.splice(t,1,e.splice(n,1,e[t])[0])}var T=function(e,t){var n=function(e){return e.constructor===Array?e:Object.values(e)};t.forEach((function(t){var r=(t=t.replace(/ +?/g,"").split("->")).map((function(e){return e.split(".")})),a=Object(p.a)(r,2),c=Object(p.a)(a[0],2),u=c[0],o=c[1],i=Object(p.a)(a[1],2),s=i[0],l=i[1],f=n(e[u]),d=n(e[s]),m=function(e,t){var n={};return e.forEach((function(e,r){n[e[t]]=n[e[t]]?[].concat(Object(b.a)(n[e[t]]),[r]):[r]})),n}(d,l);f.forEach((function(e,t){e[s]=(m[e[o]]||[]).map((function(e){return d[e].id}))}))}))},I=function(e,t){return t.reduce((function(t,n){return Object(s.a)(Object(s.a)({},t),{},Object(k.a)({},n,e[n]))}),{})},P=function(e,t){return e.constructor!==Array&&(e=Object.values(e)),e.map((function(e){return e[t]}))},C=function(e){return"".concat(e.getFullYear(),"-").concat(("0"+(e.getMonth()+1)).slice(-2),"-").concat(("0"+e.getDate()).slice(-2))},D=new j.a("db",{addons:[function(e){var t=function(){var e=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=O,e.next=3,this.toArray();case 3:return e.t1=e.sent,e.t2=t,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();e.Collection.prototype.keyBy=t,e.Table.prototype.keyBy=t},function(e){e.Table.prototype.whereIn=function(e){var t=Object.keys(e)[0],n=e[t];return this.where(t).anyOf(n)}}]});D.version(1).stores({projects:"id, title",tasks:"id, projectId",times:"++id, day, taskId"});var B=D,N={getStatisticsOnDay:function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y(t).getTime(),e.next=3,B.times.where({day:t}).keyBy("id");case 3:return n=e.sent,e.next=6,B.tasks.whereIn({id:P(n,"taskId")}).keyBy("id");case 6:return r=e.sent,e.next=9,B.projects.whereIn({id:P(r,"projectId")}).keyBy("id");case 9:return a=e.sent,T({projects:a,tasks:r,times:n},["projects.id -> tasks.projectId","tasks.id -> times.taskId"]),e.abrupt("return",{ids:Object.keys(a),entities:{projects:a,tasks:r,times:n}});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStatisticsBelongingToProject:function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.projects.where({id:t}).keyBy("id");case 2:return n=e.sent,e.next=5,B.tasks.where({projectId:t}).keyBy("id");case 5:return r=e.sent,e.next=8,B.times.whereIn({taskId:P(r,"id")}).keyBy("id");case 8:return a=e.sent,T({projects:n,tasks:r,times:a},["projects.id -> tasks.projectId","tasks.id -> times.taskId"]),e.abrupt("return",{ids:Object.keys(n),entities:{projects:n,tasks:r,times:a}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllProjects:function(){return B.projects.toArray()},addProject:function(e){return B.projects.add(e)},updateProject:function(e){var t=e.id,n=Object(m.a)(e,["id"]);return B.projects.where({id:t}).modify(n)},removeProject:function(e){var t=e.id;return B.transaction("rw",B.projects,B.tasks,B.times,Object(d.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.tasks.where({projectId:t}).primaryKeys();case 2:return n=e.sent,e.abrupt("return",Promise.all([B.projects.delete(t),B.tasks.whereIn({id:n}).delete(),B.times.whereIn({taskId:n}).delete()]));case 4:case"end":return e.stop()}}),e)}))))},getTasksWithTimesBelongingToProject:function(e){return Object(d.a)(f.a.mark((function t(){var n,r,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.projects.where({id:e}).keyBy("id");case 2:return n=t.sent,t.next=5,B.tasks.where({projectId:e}).keyBy("id");case 5:return r=t.sent,t.next=8,B.times.whereIn({taskId:Object.keys(r)}).keyBy("id");case 8:return a=t.sent,T({projects:n,tasks:r,times:a},["projects.id -> tasks.projectId","tasks.id -> times.taskId"]),t.abrupt("return",{ids:Object.keys(n),entities:{projects:n,tasks:r,times:a}});case 11:case"end":return t.stop()}}),t)})))()},addTask:function(e){return B.tasks.add(e)},updateTask:function(e){var t=e.id,n=Object(m.a)(e,["id"]);return B.tasks.where({id:t}).modify(I(n,["estimate","order","title","projectId"]))},removeTask:function(e){var t=e.id;return B.transaction("rw",B.tasks,B.times,Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([B.tasks.delete(t),B.times.where({taskId:t}).delete()]));case 1:case"end":return e.stop()}}),e)}))))},updateTaskDailyTime:function(e){return Object(d.a)(f.a.mark((function t(){var n,r,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,r=e.time,a=y(new Date).getTime(),t.next=4,B.times.where({taskId:n,day:a}).first();case 4:if(!t.sent){t.next=11;break}return t.next=8,B.times.where({day:a,taskId:n}).modify({duration:r.today});case 8:t.t0=t.sent,t.next=14;break;case 11:return t.next=13,B.times.put({day:a,duration:r.today,taskId:n});case 13:t.t0=t.sent;case 14:return t.abrupt("return",t.t0);case 15:case"end":return t.stop()}}),t)})))()}},S=n(14);function A(e){var t=Object(r.useState)(e),n=Object(p.a)(t,2),a=n[0],c=n[1];return[a,Object(r.useCallback)((function(e){c(Object(S.a)("function"===typeof e?e:function(){return e}))}),[])]}var R=function(e){var t=A([]),n=Object(p.a)(t,2),r=n[0],a=n[1];return[r,{set:function(t){a(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";return Object(b.a)(e).sort((function(e,r){return g[n](t?e[t]:e,t?r[t]:r)}))}(t,e,"desc"))},add:function(t){return new Promise((function(n){var c=function(){return a((function(){return r}))};a((function(r){var a=r[0],u=a?a[e]+1:0,o=Object(s.a)(Object(s.a)({},t),{},Object(k.a)({},e,u));r.unshift(o),n([u,c])}))}))},remove:function(e){var t=function(){return a((function(){return r}))};return new Promise((function(n){a((function(r){var a=r[e];r.splice(e,1),n([Object(s.a)({},a),t])}))}))},update:function(e,t){var n=function(){return a((function(){return r}))};return new Promise((function(r){a((function(a){Object.assign(a[e],t),r([Object(s.a)({},a[e]),n])}))}))},move:function(t,n){var c=function(){return a((function(){return r}))};return new Promise((function(u){({up:function(){return n>0&&a((function(t){var r=n-1,a=t[r][e],o=t[n][e];t[r][e]=o,t[n][e]=a,x(t,n,r),u([Object(s.a)({},t[n]),Object(s.a)({},t[r]),c])}))},down:function(){return n<r.length-1&&a((function(t){var r=n+1,a=t[r][e],o=t[n][e];t[r][e]=o,t[n][e]=a,x(t,n,r),u([Object(s.a)({},t[n]),Object(s.a)({},t[r]),c])}))}})[t]()}))}}]},W=n(5);function U(e){var t=Object.keys(e),n=Object.keys(e).filter((function(t){return!0===e[t]})),r=I(e,Object.keys(e).filter((function(t){return!0!==e[t]})));return function(e){e=function(e){for(var t in e=Object.assign({},r,e))"function"===typeof e[t]&&(e[t]=e[t]());return e}(e);var a,c,u=(a=n,c=Object.keys(e),a.filter((function(e){return!c.includes(e)})));if(u.length)throw new Error("Fields { ".concat(u.join(", ")," } are lacking!"));return I(e,t)}}function L(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,L)}var M=U({id:function(){return L()},title:"",order:null});function V(){var e=Object(W.c)(),t=Object(p.a)(e,2),n=(t[0],t[1]),c=R("order"),u=Object(p.a)(c,2),o=u[0],i=u[1];function l(){return(l=Object(d.a)(f.a.mark((function e(t){var n,r,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.remove(t);case 2:n=e.sent,r=Object(p.a)(n,2),a=r[0],c=r[1],N.removeProject(a).catch(c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=Object(d.a)(f.a.mark((function e(t,n){var r,a,c,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.update(t,n);case 2:r=e.sent,a=Object(p.a)(r,2),c=a[0],u=a[1],N.updateProject(c).catch(u);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(d.a)(f.a.mark((function e(t,n){var r,a,c,u,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.move(t,n);case 2:return r=e.sent,a=Object(p.a)(r,3),c=a[0],u=a[1],o=a[2],e.abrupt("return",Promise.all([N.updateProject(c),N.updateProject(u)]).catch(o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(d.a)(f.a.mark((function e(){var t,n,r,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new M,e.next=3,i.add(t);case 3:return n=e.sent,r=Object(p.a)(n,2),a=r[0],c=r[1],e.abrupt("return",N.addProject(Object(s.a)(Object(s.a)({},t),{},{order:a})).catch(c));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.next=3,N.getAllProjects();case 3:e.t1=e.sent,e.t0.set.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[]);return a.a.createElement(F,{projects:o,redirect:function(e){return n(e)},removeProject:function(e){return l.apply(this,arguments)},updateProject:function(e,t){return m.apply(this,arguments)},moveProject:function(e,t){return v.apply(this,arguments)},createProject:function(){return j.apply(this,arguments)}})}function F(e){var t=e.projects,n=e.redirect,r=e.removeProject,c=e.updateProject,u=e.moveProject,o=e.createProject;return a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return n("/statistics")}},"Stats by day"),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){var e=t[t.length-1];e&&""===e.title||o()}},"Add"),a.a.createElement("div",{className:"list project-list"},t.map((function(e,t){var o=e.id,i=e.title;return a.a.createElement("div",{key:o,className:"row"},a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return u("up",t)},className:"up"},"\u2191"),a.a.createElement("button",{onClick:function(){return u("down",t)},className:"down"},"\u2193")),a.a.createElement("div",null,a.a.createElement(v,{value:i,onChange:function(e){return c(t,{title:e})}})),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return n("/"+o)}},">>")),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return n("/statistics/"+o)}},"stats")),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return function(e){window.confirm("Are you sure you want to delete this project?")&&r(e)}(t)}},"X")))}))))}var J=function(e,t){for(var n in t)e.addEventListener(n,t[n])},K=function(e,t){for(var n in t)e.removeEventListener(n,t[n])};function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=function(n){var r=function(r){e[r]!==n[r]&&(e[r]=n[r],t[r]&&t[r].forEach((function(e){return e(n[r])})))};for(var a in n)r(a)},r=function(e){for(var n in e)t[n]?t[n].push(e[n]):t[n]=[e[n]]};return[e,n,r]}function q(e){var t=e.value,n=e.onChange,c=Object(r.useRef)();return Object(r.useEffect)((function(){return function(e,t){var n={hours:1,minutes:5},r=e.value?e.value.split(":").map(Number):[0,0],a=Object(p.a)(r,2),c=new X({hours:a[0],minutes:a[1],selected:null}),u=Object(p.a)(c,3),o=u[0],i=u[1];function s(){v.updateValue(),t.onChange(m())}(0,u[2])({hours:s,minutes:s,selected:function(e){return v.select(e)}});var l=function(e){if("hours"===e){var t=o.hours+n.hours;i(t<=99?{hours:t}:{hours:0})}else if("minutes"===e){var r=o.minutes+n.minutes;i(r<60?{minutes:r}:{minutes:0})}},f=function(e){if("minutes"===e){var t=o.minutes-n.minutes;i(t>=0?{minutes:t}:{minutes:60+t})}else if("hours"===e){var r=o.hours-n.hours;i(r>=0?{hours:r}:{hours:99})}},d=function(){i({selected:"hours"===o.selected?"minutes":"hours"})},m=function(){return"".concat(h(o.hours,2),":").concat(h(o.minutes,2))},v={updateValue:function(){var t=[e.selectionStart,e.selectionEnd],n=t[0],r=t[1];e.value="".concat(m()),e.setSelectionRange(n,r)},select:function(t){setTimeout({minutes:function(){return e.setSelectionRange(e.value.indexOf(":")+1,e.value.length)},hours:function(){return e.setSelectionRange(0,e.value.indexOf(":"))}}[t])},registerEvents:function(){var t=function(){return j.click()},n=function(){return j.blur()};function r(e){e.preventDefault();var t={ArrowUp:"up",ArrowDown:"down",Tab:"tab"};t[e.key]?j[t[e.key]](e.key):!isNaN(e.key)&&j.numPress(e.key)}function a(e){o.selected&&(e.wheelDelta>0?j.wheelUp():j.wheelDown())}return J(e,{click:t,keydown:r,blur:n}),J(window,{wheel:a}),function(){K(e,{click:t,keydown:r,blur:n}),K(window,{wheel:a})}}},j={click:function(){setTimeout((function(){var t=e.selectionStart>e.value.indexOf(":")?"minutes":"hours";i({selected:t}),v.select(t)}))},blur:function(){return i({selected:null})},up:function(){return l(o.selected)},down:function(){return f(o.selected)},tab:function(){return d()},numPress:function(e){var t=function(e){return e.slice(-2)};({hours:function(){i({hours:Number(t(o.hours+e))})},minutes:function(){var n=Number(t(o.minutes+e),2);i(n<=60?{minutes:n}:{minutes:"0"+String(n)[1]})}})[o.selected]()},wheelUp:function(){return l(o.selected)},wheelDown:function(){return f(o.selected)}},b=v.registerEvents();return function(){b()}}(c.current,{onChange:function(e){return n(function(e){var t=e.split(":").map(Number),n=Object(p.a)(t,2);return 60*n[0]*60+60*n[1]}(e))}})}),[]),a.a.createElement("input",{type:"text",ref:c,defaultValue:w(t)})}function H(){return a.a.createElement("h3",null,"Resource not found!")}var Y=U({id:function(){return L()},projectId:!0,title:"",estimate:0,order:null});function $(e){var t=e.type,n=void 0===t?"div":t,c=e.children,u=e.onInsert,o=Object(m.a)(e,["type","children","onInsert"]),i=Object(r.useRef)();return Object(r.useEffect)((function(){new MutationObserver((function(e){return u(e,i.current)})).observe(i.current,{childList:!0})}),[]),a.a.createElement(n,Object(s.a)({ref:i},o),c)}function z(e){var t=e.params.projectId,n=Object(W.c)(),c=Object(p.a)(n,2),u=(c[0],c[1]),o=A({}),i=Object(p.a)(o,2),l=i[0],m=i[1],v=R("order"),j=Object(p.a)(v,2),b=j[0],k=j[1],h=A(null),w=Object(p.a)(h,2),O=w[0],E=w[1];function g(e){var t=e.ids,n=e.entities,r=n.projects[t[0]];if(!r)return{project:null,tasks:[]};var a=r.tasks.map((function(e){var t=n.tasks[e];return t.time=t.times.reduce((function(e,t){var r=e.total,a=e.today,c=n.times[t];return function(e){return e.day===y(new Date).getTime()}(c)?{total:r+c.duration,today:a+c.duration}:{total:r+c.duration,today:a}}),{total:0,today:0}),delete t.times,t}));return{project:r,tasks:a}}function x(){return(x=Object(d.a)(f.a.mark((function e(){var t,n,r,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b[O].time,e.next=3,k.update(O,{time:{today:t.today+1,total:t.total+1}});case 3:return n=e.sent,r=Object(p.a)(n,2),a=r[0],c=r[1],e.abrupt("return",N.updateTaskDailyTime(a).catch(c));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(d.a)(f.a.mark((function e(t,n){var r,a,c,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.update(t,n);case 2:return r=e.sent,a=Object(p.a)(r,2),c=a[0],u=a[1],e.abrupt("return",N.updateTask(c).catch(u));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(d.a)(f.a.mark((function e(t,n){var r,a,c,u,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.move(t,n);case 2:return r=e.sent,a=Object(p.a)(r,3),c=a[0],u=a[1],o=a[2],e.abrupt("return",Promise.all([N.updateTask(c),N.updateTask(u)]).catch(o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(d.a)(f.a.mark((function e(t){var n,r,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.remove(t);case 2:return n=e.sent,r=Object(p.a)(n,2),a=r[0],c=r[1],t===O&&E((function(){return null})),e.abrupt("return",N.removeTask(a).catch(c));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(d.a)(f.a.mark((function e(){var n,r,a,c,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Y({projectId:t}),e.next=3,k.add(Object(s.a)(Object(s.a)({},n),{},{time:{total:0,today:0}}));case 3:return r=e.sent,a=Object(p.a)(r,2),c=a[0],u=a[1],e.abrupt("return",N.addTask(Object(s.a)(Object(s.a)({},n),{},{order:c})).catch(u));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){Object(d.a)(f.a.mark((function e(){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=g,e.next=3,N.getTasksWithTimesBelongingToProject(t);case 3:e.t1=e.sent,n=(0,e.t0)(e.t1),r=n.project,a=n.tasks,k.set(a),m(r);case 9:case"end":return e.stop()}}),e)})))()}),[]),function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(t){var e=setInterval((function(){return n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){return x.apply(this,arguments)}),null!==O&&1e3);return l?a.a.createElement(G,{redirect:function(e){return u(e)},project:l,tasks:b,updateTask:function(e,t){return T.apply(this,arguments)},moveTask:function(e,t){return I.apply(this,arguments)},createTask:function(){return C.apply(this,arguments)},removeTask:function(e){return P.apply(this,arguments)},activeTaskIndex:O,activateTask:function(e){return E((function(){return e}))},deactivateTask:function(e){return E((function(t){return t===e?null:e}))}}):a.a.createElement(H,null)}function G(e){var t=e.redirect,n=e.project,r=e.tasks,c=e.updateTask,u=e.moveTask,o=e.createTask,i=e.removeTask,s=e.activeTaskIndex,l=e.activateTask,f=e.deactivateTask;function d(){(0===r.length||r[0].title)&&o()}return a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return t("/")}},"<<<<"),a.a.createElement("button",{onClick:function(){return t("statistics/".concat(n.id))}},"stats"),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("h3",null,n.title),a.a.createElement("button",{onClick:d},"Add new"),r.length?a.a.createElement($,{className:"list task-list",onInsert:function(e,t){t.children[0].querySelector(".task-title input").focus()}},r.map((function(e,t){var n=e.id,r=e.title,o=e.estimate,p=e.time,m=s===t;return a.a.createElement("div",{key:n,className:E("row",{active:m})},a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return u("up",t)},className:"up"},"\u2191"),a.a.createElement("button",{onClick:function(){return u("down",t)},className:"down"},"\u2193")),a.a.createElement("div",{className:"task-title"},a.a.createElement(v,{value:r,onChange:function(e){return c(t,{title:e})},onKeyPress:function(e){return 0===t&&"Enter"===e.key&&d()}})),a.a.createElement("div",null,a.a.createElement(q,{value:o,onChange:function(e){return c(t,{estimate:e})}})),a.a.createElement("div",null,a.a.createElement("button",{className:"time",onClick:function(){return m?f(t):l(t)}},w(p.total))),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return i(t)}},"X")))}))):a.a.createElement("p",null,"No tasks created yet."))}function Q(){var e=Object(r.useState)(C(new Date)),t=Object(p.a)(e,2),n=t[0],c=t[1],u=A([]),o=Object(p.a)(u,2),i=o[0],l=o[1],m=A(),v=Object(p.a)(m,2),j=v[0],b=v[1];function k(e){var t=e.ids,n=e.entities,r=t.map((function(e){var t=n.projects[e].tasks.map((function(e){return Object(s.a)(Object(s.a)({},n.tasks[e]),{},{totalTime:n.tasks[e].times.reduce((function(e,t){return e+n.times[t].duration}),0)})})),r=t.reduce((function(e,t){return e+t.totalTime}),0);return Object(s.a)(Object(s.a)({},n.projects[e]),{},{tasks:t,total:r})})),a=r.reduce((function(e,t){return e+t.total}),0);return{projects:r,total:a}}return Object(r.useEffect)((function(){Object(d.a)(f.a.mark((function e(){var t,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=12;break}return e.t0=k,e.next=4,N.getStatisticsOnDay(new Date(n));case 4:e.t1=e.sent,t=(0,e.t0)(e.t1),r=t.projects,a=t.total,l(r),b(a),e.next=13;break;case 12:l([]);case 13:case"end":return e.stop()}}),e)})))()}),[n]),a.a.createElement(Z,{day:n,projects:i,onDayChange:c,total:j})}function Z(e){var t=e.day,n=e.projects,r=e.total,c=e.onDayChange;function u(e){return a.a.createElement("tr",{key:e.id},a.a.createElement("td",null,e.title),a.a.createElement("td",null,w(e.totalTime)))}return n&&a.a.createElement("div",null,a.a.createElement("h3",null,"Statistics for:"),a.a.createElement("input",{type:"date",value:t,onChange:function(e){return c(e.target.value)}}),a.a.createElement("small",{className:"total"},w(r)),a.a.createElement("div",null,n.map((function(e){return function(e){return a.a.createElement("div",{key:e.id},a.a.createElement("h3",null,e.title),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"task"),a.a.createElement("th",null,"time"))),a.a.createElement("tbody",null,e.tasks.map(u),a.a.createElement("tr",null,a.a.createElement("td",null),a.a.createElement("td",null,w(e.total))))))}(e)}))))}function _(e){var t=e.id,n=A({project:null,taskTimesByDay:{}}),c=Object(p.a)(n,2),u=c[0],o=u.project,i=u.taskTimesByDay,l=c[1];function m(e){var t,n,r,a,c=e.ids,u=e.entities,o=u.projects[c[0]],i=(r=Object.values(u.times),a="day",t=r.reduce((function(e,t){return(e[t[a]]=e[t[a]]||[]).push(t),e}),{}),n="desc",Object.keys(t).sort((function(e,t){return g[n](e,t)})).reduce((function(e,n){return Object(s.a)(Object(s.a)({},e),{},Object(k.a)({},n,t[n]))}),{}));for(var l in i)i[l]={tasks:i[l].map((function(e){var t=e.duration,n=e.taskId;return{id:n,title:u.tasks[n].title,duration:t}})),total:i[l].reduce((function(e,t){return e+t.duration}),0)};return o.total=Object.values(i).reduce((function(e,t){return e+t.total}),0),{project:o,taskTimesByDay:i}}return Object(r.useEffect)((function(){Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.t1=m,e.next=4,N.getStatisticsBelongingToProject(t);case 4:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3);case 7:case"end":return e.stop()}}),e)})))()}),[]),o?a.a.createElement(ee,{project:o,taskTimesByDay:i}):a.a.createElement(H,null)}function ee(e){var t=e.project,n=e.taskTimesByDay;return a.a.createElement("div",null,a.a.createElement("h3",null,'Statistics for "',t.title,'"',a.a.createElement("small",{className:"total"},w(t.total))),Object.keys(n).map((function(e){return a.a.createElement("div",{key:e},a.a.createElement("h4",null,C(new Date(Number(e)))," "),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"task"),a.a.createElement("th",null,"time"))),a.a.createElement("tbody",null,n[e].tasks.map((function(e){return a.a.createElement("tr",{key:e.id},a.a.createElement("td",null,e.title),a.a.createElement("td",null,w(e.duration)))})),a.a.createElement("tr",null,a.a.createElement("td",null),a.a.createElement("td",null,w(n[e].total))))))})))}function te(e){var t=e.params.projectId,n=Object(W.c)(),r=Object(p.a)(n,2),c=(r[0],r[1]);return a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return c("/")}},"<<<<"),t?a.a.createElement(_,{id:t}):a.a.createElement(Q,null))}function ne(){return a.a.createElement(W.b,null,a.a.createElement(W.a,{path:"/",component:V}),a.a.createElement(W.a,{path:"/statistics/:projectId?",component:te}),a.a.createElement(W.a,{path:"/:projectId",component:z}))}i.a.render(a.a.createElement(ne,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/task-tracker",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/task-tracker","/service-worker.js");c?(!function(e,t){fetch(e).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):u(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):u(t,e)}))}}()}},[[15,1,2]]]);
//# sourceMappingURL=main.084c72db.chunk.js.map